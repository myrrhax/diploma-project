databaseChangeLog:
  - changeSet:
      id: 100126_change_ddl_scripts
      author: Denis Sizintsev
      changes:
        - dropForeignKeyConstraint:
            baseTableName: t_ddl_scripts
            constraintName: fk_ddl_scripts_applied_on_schemes

        - dropForeignKeyConstraint:
            baseTableName: t_ddl_scripts
            constraintName: fk_ddl_scripts_from_scheme_schemes

        - dropColumn:
            tableName: t_ddl_scripts
            columns:
              - column:
                  name: applied_on_scheme_id
              - column:
                  name: requested_by_user_id
              - column:
                  name: from_scheme_id

        - addColumn:
            tableName: t_ddl_scripts
            columns:
              - column:
                  name: v_id
                  type: int
                  constraints:
                    nullable: false

              - column:
                  name: from_v_id
                  type: int

        - addForeignKeyConstraint:
            baseTableName: t_ddl_scripts
            baseColumnNames: v_id
            referencedTableName: t_scheme_version
            referencedColumnNames: id
            constraintName: fk_ddl_scripts_version

        - addForeignKeyConstraint:
            baseTableName: t_ddl_scripts
            baseColumnNames: from_v_id
            referencedTableName: t_scheme_version
            referencedColumnNames: id
            constraintName: fk_ddl_scripts_from_version